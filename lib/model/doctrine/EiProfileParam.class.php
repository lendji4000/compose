<?php

/**
 * EiProfileParam
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 * 
 * @package    kalifastRobot
 * @subpackage model
 * @author     Your name here
 * @version    SVN: $Id: Builder.php 7490 2010-03-29 19:53:27Z jwage $
 */
class EiProfileParam extends BaseEiProfileParam
{
    public function __toString()
  { 
    return sprintf('%s', $this->getStringName());
  }
  public function getStringName(){ 
      $result= Doctrine_Core::getTable('EiProjectParam')
              ->createQuery('pp')
              ->where('EiProfil.project_id=pp.project_id And EiProfil.project_ref=pp.project_ref')
              ->andWhere('EiProfileParam.profile_id=? And EiProfileParam.profile_ref=? And pp.param_id = ?',
                      array($this->getProfileId(),$this->getProfileRef(), $this->getName() ))
              ->fetchOne();
       if($result) return $result['name'];     
  }
  
  
  public function asArray(){
      return array(
          'id'=> $this->getId(),
          'profile_ref'=> $this->getProfileId(),
          'profile_id'=> $this->getProfileId(),
          'name' => $this->getName(),
          'description' => $this->getDescription(),
          'value' => $this->getValue()
      );
  }
}
